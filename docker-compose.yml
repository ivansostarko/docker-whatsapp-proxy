services:
  whatsapp-proxy:
    image: "facebook/whatsapp_proxy:${WHATSAPP_PROXY_IMAGE_TAG:-latest}"
    container_name: whatsapp-proxy
    restart: unless-stopped

    env_file:
      - .env

    ports:
      - "${BIND_HTTP_PORT:-80}:80/tcp"
      - "${BIND_HTTPS_PORT:-443}:443/tcp"
      - "${BIND_XMPP_PORT:-5222}:5222/tcp"

    volumes:
      - wa_certs:/etc/haproxy/certs
      - wa_logs:/var/log/haproxy
      - ./config:/config:ro

    # OPTIONAL: If you want to fully override HAProxy config, uncomment ONE of the below
    # mounts after you have extracted/validated the correct internal path for your image.
    #
    # - ./config/haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg:ro
    # - ./config/haproxy.cfg:/etc/haproxy/haproxy.cfg:ro

volumes:
  wa_certs:
  wa_logs:
